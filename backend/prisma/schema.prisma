generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Invoice {
  id                     String   @id @default(uuid())
  clientNumber           String
  referenceMonth         String // "SET/2024"
  distributorName       String?

  energiaEletricaKwh     Float
  energiaEletricaValue   Float
  energiaSceeeKwh        Float
  energiaSceeeValue      Float
  energiaCompensadaKwh   Float
  energiaCompensadaValue Float
  contribIlumPublica     Float
  ressarcimentoDanos     Float @default(0)

  consumoTotal           Float // energiaEletricaKwh + energiaSceeeKwh
  valorTotalSemGD        Float // energiaEletricaValue + energiaSceeeValue + contribIlumPublica + ressarcimentoDanos
  economiaGD             Float // abs(energiaCompensadaValue)

  pdfPath                String
  createdAt              DateTime @default(now())

  @@unique([clientNumber, referenceMonth])
}
